<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Docker(一)之安装Docker</title>
      <link href="/2020/06/30/docker-yi-zhi-an-zhuang-docker/"/>
      <url>/2020/06/30/docker-yi-zhi-an-zhuang-docker/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul><li>在<code>Linux</code>上安装<code>Docker</code>并配置加速器，<code>Docker</code>目前被分为两个版本：<ul><li><code>Community-Edition</code>：社区版；</li><li><code>Enterprise-Edition</code>：企业版；</li></ul></li></ul><h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><ul><li><code>Ubuntu-14.04_x64(LTS)</code>：<code>Trusty</code>；</li><li><code>Ubuntu-16.04_x64(LTS)</code>：<code>Xenial</code>；</li><li><code>CentOS-7_x64(LTS)</code>；</li></ul><a id="more"></a><h3 id="Ubuntu系统"><a href="#Ubuntu系统" class="headerlink" title="Ubuntu系统"></a>Ubuntu系统</h3><ul><li>卸载旧版本的<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ apt remove docker docker-engine docker.io$ <span class="token function">rm</span> -rf /var/lib/docker/</code></pre><ul><li>在<code>Ubuntu-14.04</code>上需要安装<code>AUFS</code>包，以支持<code>aufs</code>存储驱动:</li></ul><pre class=" language-bash"><code class="language-bash">$ apt <span class="token function">install</span> -y linux-image-extra-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -r<span class="token variable">)</span></span> linux-image-extra-virtual</code></pre><ul><li><p>在<code>Ubuntu-16.04</code>及以后<code>Docker-CE</code>默认使用<code>overlay2</code>作为存储驱动，无需安装；</p></li><li><p>安装基础软件包：</p></li></ul><pre class=" language-bash"><code class="language-bash">$ apt <span class="token function">install</span> -y apt-transport-https ca-certificates curl</code></pre><ul><li>添加<code>Docker</code>的官方<code>GPG</code>密钥：</li></ul><pre class=" language-bash"><code class="language-bash">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key add -</code></pre><ul><li>添加<code>Docker-CE</code>存储库(官网)：</li></ul><pre class=" language-bash"><code class="language-bash">$ add-apt-repository <span class="token string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span></code></pre><ul><li>添加<code>Docker-CE</code>存储库(国内)：</li></ul><pre class=" language-bash"><code class="language-bash">$ add-apt-repository <span class="token string">"deb [arch=amd64] http://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span></code></pre><ul><li>更新软件包的索引列表：</li></ul><pre class=" language-bash"><code class="language-bash">$ apt update</code></pre><h3 id="CentOS系统"><a href="#CentOS系统" class="headerlink" title="CentOS系统"></a>CentOS系统</h3><ul><li>卸载旧版本的<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum remove docker docker-common container-selinux docker-selinux docker-engine</code></pre><ul><li>安装<code>yum-utils</code>，它提供<code>yum-config-manager</code>实用程序：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum <span class="token function">install</span> -y yum-utils</code></pre><ul><li>添加<code>Docker-CE</code>存储库(官网)：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code></pre><ul><li>添加<code>Docker-CE</code>存储库(国内)：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum-config-manager --add-repo https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo</code></pre><ul><li>更新软件包的索引列表：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum makecache fast</code></pre><h2 id="安装Docker服务"><a href="#安装Docker服务" class="headerlink" title="安装Docker服务"></a>安装Docker服务</h2><h3 id="Ubuntu系统-1"><a href="#Ubuntu系统-1" class="headerlink" title="Ubuntu系统"></a>Ubuntu系统</h3><ul><li>安装最新版的<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ apt <span class="token function">install</span> -y docker-ce</code></pre><ul><li>启动<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># Ubuntu-14</span>$ <span class="token function">service</span> start docker<span class="token comment" spellcheck="true"># Ubuntu-16</span>$ systemctl start docker</code></pre><ul><li>卸载<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ apt purge docker-ce$ <span class="token function">rm</span> -rf /var/lib/docker</code></pre><h3 id="CentOS系统-1"><a href="#CentOS系统-1" class="headerlink" title="CentOS系统"></a>CentOS系统</h3><ul><li>安装最新版的<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum <span class="token function">install</span> -y docker-ce</code></pre><ul><li>启动<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ systemctl start docker</code></pre><ul><li>使<code>Docker</code>服务随机自启：</li></ul><pre class=" language-bash"><code class="language-bash">$ systemctl <span class="token function">enable</span> docker</code></pre><ul><li>卸载<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash">$ yum remove -y docker-ce$ <span class="token function">rm</span> -rf /var/lib/docker</code></pre><h3 id="CentOS-Ubuntu系统"><a href="#CentOS-Ubuntu系统" class="headerlink" title="CentOS/Ubuntu系统"></a>CentOS/Ubuntu系统</h3><ul><li>查看<code>Docker</code>的版本信息：</li></ul><pre class=" language-bash"><code class="language-bash">$ docker -v$ docker version</code></pre><h2 id="配置Docker加速器"><a href="#配置Docker加速器" class="headerlink" title="配置Docker加速器"></a>配置Docker加速器</h2><ul><li><p>由于众所周知的原因(墙)，从<code>Docker Hub</code>难以高效地下载镜像，除了使用<code>VPN</code>或代理之外，最为有效的方式就是使用<code>Docker</code>国内镜像；</p></li><li><p><code>DaoCloud</code>为首个提供国内免费<code>Docker Hub</code>镜像的团体，可以使用<code>DaoCloud</code>团队提供的<code>Docker Hub Mirror</code>服务代替<code>Docker</code>官网的<code>Docker Hub</code>，<code>阿里云</code>也提供了国内免费的<code>Docker Hub Mirror</code>；</p></li><li><p><a href="https://www.daocloud.io/" target="_blank" rel="noopener">DaoCloud</a>，注册用户并登录，在自己管理界面点击<code>加速器</code>标签，根据弹出页面配置加速器；</p></li><li><p><a href="https://cr.console.aliyun.com/" target="_blank" rel="noopener">阿里云</a>，支付宝登录进入以后点击<code>镜像加速器</code>，还可以在<a href="https://dev.aliyun.com/search.html" target="_blank" rel="noopener">阿里云开发者平台</a>中检索镜像；</p></li><li><p>配置私人加速器：</p></li></ul><pre class=" language-bash"><code class="language-bash">$ curl -sSL https://get.daocloud.io/daotools/set_mirror.sh <span class="token operator">|</span> sh -s http://6bdc63e3.m.daocloud.io</code></pre><ul><li>配置文件：</li></ul><pre class=" language-bash"><code class="language-bash">$ <span class="token function">mkdir</span> -p /etc/docker$ vim /etc/docker/daemon.json</code></pre><pre class=" language-text"><code class="language-text">{    "registry-mirrors": ["https://9cs90h5l.mirror.aliyuncs.com"]}</code></pre><ul><li>重启<code>Docker</code>服务：</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># Ubuntu-14</span>$ <span class="token function">service</span> docker restart<span class="token comment" spellcheck="true"># Ubuntu-16/CentOS-7</span>$ systemctl restart docker</code></pre><hr><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/06/29/hello-world/"/>
      <url>/2020/06/29/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
